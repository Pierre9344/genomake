[
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.html",
    "href": "reference/pipelines.chromake.scripts.paths.html",
    "title": "pipelines.chromake.scripts.paths",
    "section": "",
    "text": "pipelines.chromake.scripts.paths\nThe paths module of chromake contains functions to identify the inputs and the files generated by the chromake pipeline.\n\n\n\n\n\nName\nDescription\n\n\n\n\nget_all_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\nget_sequencing_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of a specific sequencing.\n\n\n\n\n\npipelines.chromake.scripts.paths.get_all_fastq_related_paths(cfg, mode)\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered_coord (bam files after filtering the non-standard chromosomes and sorted by coordinate) - bam_filtered_name (bam files after filtering the non-standard chromosomes and sorted by name) - bedgraph (bedGrapg files generated by HOMER for UCSC visualisation)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of file paths.\n\n\n\n\n\n\n\npipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths(\n    cfg,\n    sequencing_name,\n    mode,\n)\nGet the path to the files generated by the pipeline for the samples of a specific sequencing.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nsequencing_name\nstr\nString representing the name of the sequencing\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered (bam files after filtering the non-standard chromosomes) - flagstat (output of samtools flagstat on the bam files) - stats (output of samtools stats on the bam files) - multiqc_stats (multiqc on the folder containing the stats output)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of all file paths.",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake.paths`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.html#functions",
    "href": "reference/pipelines.chromake.scripts.paths.html#functions",
    "title": "pipelines.chromake.scripts.paths",
    "section": "",
    "text": "Name\nDescription\n\n\n\n\nget_all_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\nget_sequencing_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of a specific sequencing.\n\n\n\n\n\npipelines.chromake.scripts.paths.get_all_fastq_related_paths(cfg, mode)\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered_coord (bam files after filtering the non-standard chromosomes and sorted by coordinate) - bam_filtered_name (bam files after filtering the non-standard chromosomes and sorted by name) - bedgraph (bedGrapg files generated by HOMER for UCSC visualisation)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of file paths.\n\n\n\n\n\n\n\npipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths(\n    cfg,\n    sequencing_name,\n    mode,\n)\nGet the path to the files generated by the pipeline for the samples of a specific sequencing.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nsequencing_name\nstr\nString representing the name of the sequencing\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered (bam files after filtering the non-standard chromosomes) - flagstat (output of samtools flagstat on the bam files) - stats (output of samtools stats on the bam files) - multiqc_stats (multiqc on the folder containing the stats output)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of all file paths.",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake.paths`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html",
    "href": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html",
    "title": "pipelines.chromake.scripts.paths.get_all_fastq_related_paths",
    "section": "",
    "text": "pipelines.chromake.scripts.paths.get_all_fastq_related_paths(cfg, mode)\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered_coord (bam files after filtering the non-standard chromosomes and sorted by coordinate) - bam_filtered_name (bam files after filtering the non-standard chromosomes and sorted by name) - bedgraph (bedGrapg files generated by HOMER for UCSC visualisation)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of file paths."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html#parameters",
    "href": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html#parameters",
    "title": "pipelines.chromake.scripts.paths.get_all_fastq_related_paths",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered_coord (bam files after filtering the non-standard chromosomes and sorted by coordinate) - bam_filtered_name (bam files after filtering the non-standard chromosomes and sorted by name) - bedgraph (bedGrapg files generated by HOMER for UCSC visualisation)\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html#returns",
    "href": "reference/pipelines.chromake.scripts.paths.get_all_fastq_related_paths.html#returns",
    "title": "pipelines.chromake.scripts.paths.get_all_fastq_related_paths",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nlist\nA list of file paths."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.remove_sequencing.html",
    "href": "reference/pipelines.chromake.scripts.config.remove_sequencing.html",
    "title": "pipelines.chromake.scripts.config.remove_sequencing",
    "section": "",
    "text": "pipelines.chromake.scripts.config.remove_sequencing(\n    config_path,\n    sequencing_name,\n)\nRemove an entire sequencing project from the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the sequencing project to remove.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.remove_sequencing.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.remove_sequencing.html#parameters",
    "title": "pipelines.chromake.scripts.config.remove_sequencing",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the sequencing project to remove.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.html",
    "href": "reference/pipelines.chromake.scripts.config.html",
    "title": "pipelines.chromake.scripts.config",
    "section": "",
    "text": "pipelines.chromake.scripts.config\nThe config module of chromake contains functions to read and write the config file of the chromake pipeline.\n\n\n\n\n\nName\nDescription\n\n\n\n\ncheck_config_format\nCreate an example genomake/chromake YAML configuration file\n\n\ncheck_project_and_sequencing\nEnsures that projects with no associated sequencing samples are removed from the config,\n\n\ncheck_sample_files_exist\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\ncreate_config_from_table\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\ncreate_example_config\nCreate an example genomake/chromake YAML configuration file\n\n\ncreate_samplesheet_from_config\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths\n\n\nremove_samples\nRemove specific samples from a project in the YAML config.\n\n\nremove_sequencing\nRemove an entire sequencing project from the YAML config.\n\n\nupdate_jobs\nUpdate or add the JOBS section in an existing YAML config.\n\n\n\n\n\npipelines.chromake.scripts.config.check_config_format(cfg, raise_error=True)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nA dict object representing a configuration file for the chromake pipeline.\nrequired\n\n\nraise_error\nbool\nRaise a runtime error or simply print the message.\nTrue\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.check_project_and_sequencing(config)\nEnsures that projects with no associated sequencing samples are removed from the config, and removes empty sequencing projects, while making sure the mark is considered in the filtering process.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig\ndict\nLoaded YAML config (as a dictionary).\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\ndict\nUpdated config dictionary.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.check_sample_files_exist(config_path)\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nbool\nTrue if all R1 and R2 files exist, False otherwise.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_config_from_table(\n    table_path,\n    output_path,\n    proj_paths,\n    jobs=None,\n    sequencings=None,\n)\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ntable_path\nstr\nPath to the input CSV or Excel table.\nrequired\n\n\noutput_path\nstr\nPath to write the YAML config.\nrequired\n\n\nproj_paths\ndict\nDictionary of project_name -&gt; project_path.\nrequired\n\n\njobs\ndict\nDefault JOBS settings (CORES_PER_JOBS, QOS_INFOS).\nNone\n\n\nsequencings\ndict\nDictionary of sequencings informations (PATH, R1_ADAPTOR, R2_ADAPTOR).\nNone\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML config file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_example_config(\n    filename='test_config.yaml',\n)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nfilename\nstr\nFilename to use if output is a directory.\n'test_config.yaml'\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML configuration file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_samplesheet_from_config(\n    config_path,\n    output_path,\n    strand_columns=False,\n    excel=True,\n)\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths by adding the sequencing project path. Includes both SAMPLES and INPUTS.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\noutput_path\nstr\nPath to save the generated table (CSV by default; Excel if excel=True).\nrequired\n\n\nstrand_columns\nbool\nIf True, each strand (R1, R2) PATH will be a separate column (wide format); if False, each strand will be in separate rows and a STRAND columns will be added to differentiate them (long format).\nFalse\n\n\nexcel\nbool\nIf True, save as Excel (.xlsx). Otherwise, save as CSV.\nTrue\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the generated samplesheet file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.remove_samples(\n    config_path,\n    sequencing_name,\n    samples,\n)\nRemove specific samples from a project in the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the project containing the samples.\nrequired\n\n\nsamples\nlist of str\nList of sample names to remove.\nrequired\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.remove_sequencing(\n    config_path,\n    sequencing_name,\n)\nRemove an entire sequencing project from the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the sequencing project to remove.\nrequired\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.update_jobs(config_path, jobs)\nUpdate or add the JOBS section in an existing YAML config.\nCORES_PER_JOBS: number of cpu cores to use for each jobs (&gt;=1)\nQOS_INFOS: if using an executor like slurm, indicate the name of the qos (e.g. short), and the associated MaxWall in minutes.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\njobs\ndict\nDictionary containing JOBS information to update. Can be a full replacement or partial update.\nrequired\n\n\n\n\n\n\njobs_update = {\n    \"CORES_PER_JOBS\": {\n        \"FASTQC\": 10,\n        \"CUTADAPT\": 10,\n        \"BOWTIE2\": 30,\n        \"SAMTOOLS_QC\": 5,\n        \"MULTIBAMSUMMARY\": 5,\n        \"BEDTOOLS\": 5\n    },\n    \"QOS_INFOS\": {\n        \"short\": {\"MaxWall\": 2000},\n        \"medium\": {\"MaxWall\": 5000},\n        \"long\": {\"MaxWall\": 15000} \n    }\n}\nupdate_jobs(\"config.yaml\", jobs_update)",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake.config`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.html#functions",
    "href": "reference/pipelines.chromake.scripts.config.html#functions",
    "title": "pipelines.chromake.scripts.config",
    "section": "",
    "text": "Name\nDescription\n\n\n\n\ncheck_config_format\nCreate an example genomake/chromake YAML configuration file\n\n\ncheck_project_and_sequencing\nEnsures that projects with no associated sequencing samples are removed from the config,\n\n\ncheck_sample_files_exist\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\ncreate_config_from_table\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\ncreate_example_config\nCreate an example genomake/chromake YAML configuration file\n\n\ncreate_samplesheet_from_config\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths\n\n\nremove_samples\nRemove specific samples from a project in the YAML config.\n\n\nremove_sequencing\nRemove an entire sequencing project from the YAML config.\n\n\nupdate_jobs\nUpdate or add the JOBS section in an existing YAML config.\n\n\n\n\n\npipelines.chromake.scripts.config.check_config_format(cfg, raise_error=True)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nA dict object representing a configuration file for the chromake pipeline.\nrequired\n\n\nraise_error\nbool\nRaise a runtime error or simply print the message.\nTrue\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.check_project_and_sequencing(config)\nEnsures that projects with no associated sequencing samples are removed from the config, and removes empty sequencing projects, while making sure the mark is considered in the filtering process.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig\ndict\nLoaded YAML config (as a dictionary).\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\ndict\nUpdated config dictionary.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.check_sample_files_exist(config_path)\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nbool\nTrue if all R1 and R2 files exist, False otherwise.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_config_from_table(\n    table_path,\n    output_path,\n    proj_paths,\n    jobs=None,\n    sequencings=None,\n)\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ntable_path\nstr\nPath to the input CSV or Excel table.\nrequired\n\n\noutput_path\nstr\nPath to write the YAML config.\nrequired\n\n\nproj_paths\ndict\nDictionary of project_name -&gt; project_path.\nrequired\n\n\njobs\ndict\nDefault JOBS settings (CORES_PER_JOBS, QOS_INFOS).\nNone\n\n\nsequencings\ndict\nDictionary of sequencings informations (PATH, R1_ADAPTOR, R2_ADAPTOR).\nNone\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML config file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_example_config(\n    filename='test_config.yaml',\n)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nfilename\nstr\nFilename to use if output is a directory.\n'test_config.yaml'\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML configuration file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.create_samplesheet_from_config(\n    config_path,\n    output_path,\n    strand_columns=False,\n    excel=True,\n)\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths by adding the sequencing project path. Includes both SAMPLES and INPUTS.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\noutput_path\nstr\nPath to save the generated table (CSV by default; Excel if excel=True).\nrequired\n\n\nstrand_columns\nbool\nIf True, each strand (R1, R2) PATH will be a separate column (wide format); if False, each strand will be in separate rows and a STRAND columns will be added to differentiate them (long format).\nFalse\n\n\nexcel\nbool\nIf True, save as Excel (.xlsx). Otherwise, save as CSV.\nTrue\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the generated samplesheet file.\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.remove_samples(\n    config_path,\n    sequencing_name,\n    samples,\n)\nRemove specific samples from a project in the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the project containing the samples.\nrequired\n\n\nsamples\nlist of str\nList of sample names to remove.\nrequired\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.remove_sequencing(\n    config_path,\n    sequencing_name,\n)\nRemove an entire sequencing project from the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the sequencing project to remove.\nrequired\n\n\n\n\n\n\n\npipelines.chromake.scripts.config.update_jobs(config_path, jobs)\nUpdate or add the JOBS section in an existing YAML config.\nCORES_PER_JOBS: number of cpu cores to use for each jobs (&gt;=1)\nQOS_INFOS: if using an executor like slurm, indicate the name of the qos (e.g. short), and the associated MaxWall in minutes.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\njobs\ndict\nDictionary containing JOBS information to update. Can be a full replacement or partial update.\nrequired\n\n\n\n\n\n\njobs_update = {\n    \"CORES_PER_JOBS\": {\n        \"FASTQC\": 10,\n        \"CUTADAPT\": 10,\n        \"BOWTIE2\": 30,\n        \"SAMTOOLS_QC\": 5,\n        \"MULTIBAMSUMMARY\": 5,\n        \"BEDTOOLS\": 5\n    },\n    \"QOS_INFOS\": {\n        \"short\": {\"MaxWall\": 2000},\n        \"medium\": {\"MaxWall\": 5000},\n        \"long\": {\"MaxWall\": 15000} \n    }\n}\nupdate_jobs(\"config.yaml\", jobs_update)",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake.config`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_example_config.html",
    "href": "reference/pipelines.chromake.scripts.config.create_example_config.html",
    "title": "pipelines.chromake.scripts.config.create_example_config",
    "section": "",
    "text": "pipelines.chromake.scripts.config.create_example_config(\n    filename='test_config.yaml',\n)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nfilename\nstr\nFilename to use if output is a directory.\n'test_config.yaml'\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML configuration file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_example_config.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.create_example_config.html#parameters",
    "title": "pipelines.chromake.scripts.config.create_example_config",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nfilename\nstr\nFilename to use if output is a directory.\n'test_config.yaml'"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_example_config.html#returns",
    "href": "reference/pipelines.chromake.scripts.config.create_example_config.html#returns",
    "title": "pipelines.chromake.scripts.config.create_example_config",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML configuration file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html",
    "href": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html",
    "title": "pipelines.chromake.scripts.config.check_sample_files_exist",
    "section": "",
    "text": "pipelines.chromake.scripts.config.check_sample_files_exist(config_path)\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nbool\nTrue if all R1 and R2 files exist, False otherwise."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html#parameters",
    "title": "pipelines.chromake.scripts.config.check_sample_files_exist",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html#returns",
    "href": "reference/pipelines.chromake.scripts.config.check_sample_files_exist.html#returns",
    "title": "pipelines.chromake.scripts.config.check_sample_files_exist",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nbool\nTrue if all R1 and R2 files exist, False otherwise."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_config_format.html",
    "href": "reference/pipelines.chromake.scripts.config.check_config_format.html",
    "title": "pipelines.chromake.scripts.config.check_config_format",
    "section": "",
    "text": "pipelines.chromake.scripts.config.check_config_format(cfg, raise_error=True)\nCreate an example genomake/chromake YAML configuration file using the new SEQUENCING / PROJECTS split.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nA dict object representing a configuration file for the chromake pipeline.\nrequired\n\n\nraise_error\nbool\nRaise a runtime error or simply print the message.\nTrue"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_config_format.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.check_config_format.html#parameters",
    "title": "pipelines.chromake.scripts.config.check_config_format",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nA dict object representing a configuration file for the chromake pipeline.\nrequired\n\n\nraise_error\nbool\nRaise a runtime error or simply print the message.\nTrue"
  },
  {
    "objectID": "reference/index.html",
    "href": "reference/index.html",
    "title": "Function reference",
    "section": "",
    "text": "A snakemake pipeline to align ChIP-seq and ATAC-seq samples.\n\n\n\npipelines.chromake\nChromake pipeline\n\n\npipelines.chromake.scripts.config\nThe config module of chromake contains functions to read and write the config file of the chromake pipeline.\n\n\npipelines.chromake.scripts.paths\nThe paths module of chromake contains functions to identify the inputs and the files generated by the chromake pipeline.\n\n\npipelines.chromake.scripts.config.create_example_config\nCreate an example genomake/chromake YAML configuration file\n\n\npipelines.chromake.scripts.config.update_jobs\nUpdate or add the JOBS section in an existing YAML config.\n\n\npipelines.chromake.scripts.config.check_project_and_sequencing\nEnsures that projects with no associated sequencing samples are removed from the config,\n\n\npipelines.chromake.scripts.config.remove_sequencing\nRemove an entire sequencing project from the YAML config.\n\n\npipelines.chromake.scripts.config.remove_samples\nRemove specific samples from a project in the YAML config.\n\n\npipelines.chromake.scripts.config.create_samplesheet_from_config\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths\n\n\npipelines.chromake.scripts.config.create_config_from_table\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\npipelines.chromake.scripts.config.check_sample_files_exist\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\npipelines.chromake.scripts.config.check_config_format\nCreate an example genomake/chromake YAML configuration file\n\n\npipelines.chromake.scripts.paths.get_all_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\npipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of a specific sequencing."
  },
  {
    "objectID": "reference/index.html#chromake",
    "href": "reference/index.html#chromake",
    "title": "Function reference",
    "section": "",
    "text": "A snakemake pipeline to align ChIP-seq and ATAC-seq samples.\n\n\n\npipelines.chromake\nChromake pipeline\n\n\npipelines.chromake.scripts.config\nThe config module of chromake contains functions to read and write the config file of the chromake pipeline.\n\n\npipelines.chromake.scripts.paths\nThe paths module of chromake contains functions to identify the inputs and the files generated by the chromake pipeline.\n\n\npipelines.chromake.scripts.config.create_example_config\nCreate an example genomake/chromake YAML configuration file\n\n\npipelines.chromake.scripts.config.update_jobs\nUpdate or add the JOBS section in an existing YAML config.\n\n\npipelines.chromake.scripts.config.check_project_and_sequencing\nEnsures that projects with no associated sequencing samples are removed from the config,\n\n\npipelines.chromake.scripts.config.remove_sequencing\nRemove an entire sequencing project from the YAML config.\n\n\npipelines.chromake.scripts.config.remove_samples\nRemove specific samples from a project in the YAML config.\n\n\npipelines.chromake.scripts.config.create_samplesheet_from_config\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths\n\n\npipelines.chromake.scripts.config.create_config_from_table\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\npipelines.chromake.scripts.config.check_sample_files_exist\nCheck if all R1 and R2 FASTQ files listed in the config exist.\n\n\npipelines.chromake.scripts.config.check_config_format\nCreate an example genomake/chromake YAML configuration file\n\n\npipelines.chromake.scripts.paths.get_all_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of all sequencing and projects.\n\n\npipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths\nGet the path to the files generated by the pipeline for the samples of a specific sequencing."
  },
  {
    "objectID": "cli.html",
    "href": "cli.html",
    "title": "genomake CLI",
    "section": "",
    "text": "genomake [-h] {chromake,...} ...\nCommand-line interface for genomake, a python package to analyze genomic sequencing data.\n\n\n\n\n\n\n\n\n\n\nCommand\nDescription\n\n\n\n\nchromake\nRun the chromake pipeline to align ChIP-seq and ATAC-seq data and identify enriched peaks.\n\n\n(future)\nAdditional pipelines will be added in future releases.\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n-h, --help\nflag\nShow help message and exit."
  },
  {
    "objectID": "cli.html#commands",
    "href": "cli.html#commands",
    "title": "genomake CLI",
    "section": "",
    "text": "Command\nDescription\n\n\n\n\nchromake\nRun the chromake pipeline to align ChIP-seq and ATAC-seq data and identify enriched peaks.\n\n\n(future)\nAdditional pipelines will be added in future releases."
  },
  {
    "objectID": "cli.html#global-options",
    "href": "cli.html#global-options",
    "title": "genomake CLI",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n-h, --help\nflag\nShow help message and exit."
  },
  {
    "objectID": "cli.html#parameters",
    "href": "cli.html#parameters",
    "title": "genomake CLI",
    "section": "Parameters",
    "text": "Parameters\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\n--config-path, -c\nstr\nPath to the YAML configuration file describing samples, references, and pipeline parameters. See genomake.pipelines.chromake.scripts.config.create_example_config() for an example.\nrequired\n\n\n--jobs, -j\nint\nMaximum number of Snakemake jobs to run concurrently.\n5\n\n\n--cores\nint\nMaximum number of CPU cores used in parallel (Snakemake --cores).\n150\n\n\n--local-cores\nint\nIn cluster/cloud mode, use at most N cores of the host machine in parallel (default: number of CPU cores of the host). The cores are used to execute local rules. This option is ignored when not in cluster/cloud mode. (Snakemake --local-cores).\n1\n\n\n--others-snakemake\nstr\nAdditional arguments passed verbatim to Snakemake (e.g. executor, SLURM options).\n\"\"\n\n\n--print-only, -p\nflag\nPrint the generated Snakemake command and exit without executing the workflow.\nFalse"
  },
  {
    "objectID": "cli.html#examples",
    "href": "cli.html#examples",
    "title": "genomake CLI",
    "section": "Examples",
    "text": "Examples\nRun the pipeline locally:\ngenomake chromake -c config.yaml\nRun on a SLURM cluster:\ngenomake chromake \\\n  -c config.yaml \\\n  --jobs 8 \\\n  --cores 250 \\\n  --others-snakemake \"--executor slurm --default-resources slurm_account=singlecell\"\nPrint the Snakemake command without running it:\ngenomake chromake -c config.yaml --print-only"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Get started",
    "section": "",
    "text": "The genomake package is a collections of scripts and pipeline written in python to analyze with genomic data.\nThis package is a WIP."
  },
  {
    "objectID": "index.html#objectives",
    "href": "index.html#objectives",
    "title": "Get started",
    "section": "Objectives",
    "text": "Objectives\nThe chromake pipeline is a pipeline to analyze ChIP-seq (H3K27ac, H3K27me3, and H2Aub marks), and ATAC-seq samples.\nThis pipeline is a WIP. It currently realize the alignment of the samples, and generate UCSC compatible tracks but doesn’t realize the peak calling."
  },
  {
    "objectID": "index.html#configuration-file",
    "href": "index.html#configuration-file",
    "title": "Get started",
    "section": "Configuration file",
    "text": "Configuration file\nTo use the pipeline, you need a YAML configuration file. This files must contains 3 fields:\n\nSEQUENCING: informations concerning one or more sequencing (global path, samples fastq, adaptor for trimming, genome for the alignment, …). The PATH indicated for a sequencing will be used to output the QC and bam files\nPROJECTS: used to regroup samples of multiple sequencing in a single project for the peak calling. It is recommanded to indicate different paths for different projects.\nJOBS: information about the number of cores to use for multithreading, and qos (when using an executor like slurm).\n\nYou can generate an example configuration file with:\nfrom genomake.pipelines.chromake.scripts import config as chr_config\nchr_config.create_example_config(\"test_config.yaml\")\nOther functions can be used to convert the configuration file in a samplesheet (excel or csv) or to convert the samplesheet into a configuration file:\n# convert to a samplesheet\nchr_config.create_samplesheet_from_config(\"test_config.yaml\", \"test_samplesheet.xlsx\", False, True)\n\n# Convert back to a config file. Sample R1, R2, and Marks can be obtained from the samplesheet.\n# Other informations need to be indicated using the other arguments of the function or to be added manually in the configuration file.\nchr_config.create_config_from_table(\n    \"test_samplesheet.xlsx\",\n    \"test_config2.yaml\",\n    proj_paths = {\n        \"ChIP_H3K27AC\": \"/scratch/.../ChIP_H3K27AC\",\n        \"ChIP_H3K27ME3\": \"/scratch/.../ChIP_H3K27ME3\",\n        \"ChIP_H2AUB\": \"/scratch/.../ChIP_H2AUB\",\n        \"ChIP_ATAC\": \"/scratch/.../ChIP_ATAC\"\n    },\n    jobs = {\n        \"CORES_PER_JOBS\": {\n            \"FASTQC\": 10,\n            \"CUTADAPT\": 10,\n            \"BOWTIE2\": 30,\n            \"SAMTOOLS_QC\": 5,\n            \"MULTIBAMSUMMARY\": 5,\n            \"BEDTOOLS\": 5\n        },\n        \"QOS_INFOS\": {\n            \"short\": {\"MaxWall\": 24 * 60}, # 1 day\n            \"medium\": {\"MaxWall\": 3 * 24 * 60}, # 3 days\n            \"long\": {\"MaxWall\": 8 * 24 * 60}, # 8 days in minutes\n        },\n    }\n    sequencings = {\n        \"MO203\": {\n        \"PATH\": \"/scratch/.../MO203/\",\n        \"R1_ADAPTOR\": \"AGATCGGAAGAGCACACGTCTGAACTCCAGTCA\",\n        \"R2_ADAPTOR\": \"AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT\",\n        \"PARAMETERS\": {\n            \"CUTADAPT\": \"-q 20 --pair-filter=any\",\n            \"BOWTIE2_REF\": \"&lt;path to genome reference build for bowtie2&gt;\",\n            \"BLACKLIST_BED\": \"&lt;Path to blacklist file in bed format, see https://github.com/Boyle-Lab/Blacklist &gt;\",\n            \"GENOME\": &lt;path to the sequencing genome for bowtie&gt;,\n            \"CHROM_SIZE\": \"&lt;path to file wih the size of chromosome (can be found on UCSC) &gt;\"\n        }\n    },\n    \"MO208\": {\n        \"PATH\": \"/scratch/.../Pierre_Solomon/MO208/\",\n        \"R1_ADAPTOR\": \"AGATCGGAAGAGCACACGTCTGAACTCCAGTCA\",\n        \"R2_ADAPTOR\": \"AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT\",\n        \"PARAMETERS\": {\n            \"CUTADAPT\": \"-q 20 --pair-filter=any\",\n            \"BOWTIE2_REF\": \"&lt;path to genome reference build for bowtie2&gt;\",\n            \"BLACKLIST_BED\": \"&lt;Path to blacklist file in bed format, see https://github.com/Boyle-Lab/Blacklist &gt;\",\n            \"GENOME\": &lt;path to the sequencing genome for bowtie&gt;,\n            \"CHROM_SIZE\": \"&lt;path to file wih the size of chromosome (can be found on UCSC) &gt;\"\n        }\n    },\n    \"MO211\": {\n        \"PATH\": \"/scratch/.../MO211/\",\n        \"R1_ADAPTOR\": \"CTGTCTCTTATACACATCT\",\n        \"R2_ADAPTOR\": \"CTGTCTCTTATACACATCT\",\n        \"PARAMETERS\": {\n            \"CUTADAPT\": \"-q 20 --pair-filter=any\",\n            \"BOWTIE2_REF\": \"&lt;path to genome reference build for bowtie2&gt;\",\n            \"BLACKLIST_BED\": \"&lt;Path to blacklist file in bed format, see https://github.com/Boyle-Lab/Blacklist &gt;\",\n            \"GENOME\": &lt;path to the sequencing genome for bowtie&gt;,\n            \"CHROM_SIZE\": \"&lt;path to file wih the size of chromosome (can be found on UCSC) &gt;\"\n        }\n    }\n})\n\n# Check the configuration file\nwith open(\"test_config2.yaml\") as stream:\n    config = yaml.safe_load(stream)\nchr_config.check_config_format(config, raise_error=False)"
  },
  {
    "objectID": "index.html#launching-the-pipeline",
    "href": "index.html#launching-the-pipeline",
    "title": "Get started",
    "section": "Launching the pipeline",
    "text": "Launching the pipeline\nOnce the configuration file is created, chromake can be launched using the CLI included in genomake:\ngenomake chromake -c ./config.yaml --cores 250 --jobs 10\nIf you need to:\n\nuse an executor\ndo a dry run\nunlock the directory\n\nThen you can use the --others-snakemake argument. Here an example for the slurm executor:\ngenomake chromake -c ./config.yaml --cores 250 --local-cores 1 --jobs 8 \\\n   --others-snakemake \"--executor slurm --default-resources \\\n   slurm_account=&lt;your_slurm_account&gt; clusters=&lt;name_cluster_for_computation&gt; --slurm-logdir \\\n   ./logs --slurm-keep-successful-logs --slurm-delete-logfiles-older-than 0 \\\n   --rerun-incomplete\"\nYou can check the final command without launching it using the -p argument of genomake chromake."
  },
  {
    "objectID": "index.html#outputs",
    "href": "index.html#outputs",
    "title": "Get started",
    "section": "Outputs",
    "text": "Outputs\nThe outputs of chromake will be placed in the directories of the sequencings (trimmed fastq, qc, bam, bedGraph track) or the directories of the projects (bed resulting from the peak calling).\nSequencing:\n\nBAM: bam files resulting from the alignment and their index. Two versions are kept. The one outputed by bowtie 2 and a version trimmed (the pipeline only keep the standard chromosome) and sorted.\nBED: bed files generated by bedtools genomecov using the sorted bam files.\nBEDGRAPH: folder contening the begGraph file for UCSC visualization\nHOMER: folder generated by homer makeTagDirectory\nQC: results of various qc (fastqc and multiqc, cutadapt logs, bowtie logs, samtools flagstat, samtools stats, size of the fragments)\nTRIMMED: trimmed fastq path"
  },
  {
    "objectID": "reference/pipelines.chromake.html",
    "href": "reference/pipelines.chromake.html",
    "title": "pipelines.chromake",
    "section": "",
    "text": "pipelines.chromake\nChromake pipeline\nThis subpackage is used to contains a snakemake pipeline and functions to align sequencing data of ChIP-seq and ATAC-seq experiments, identify peaks, and realize a read count.\nThe ressources used can be modified. In particular, the number of cores can be specified in the config file while other ressources (memory, runtime) will necessite to copy and modify the snakefile included in this subpackage.\n\n\nThis subpackage contains submodules (genomake.pipelines.chromake.scripts.config and genomake.pipelines.chromake.scripts.config). Among them, paths is used by the snakefile to track the files it generate, while config was created to help the user create the YAML config file needed by snakemake.\n\n\n\nTo run the pipeline: - you need at least 60 Go of RAM. - you need a configuration file in a yaml format. Check genomake.pipelines.chromake.scripts.config.create_example_config for an example. The genomake.pipelines.chromake.scripts.config subpackage contains functions to generate such a config file from a samplesheet. - The configuration is composed of 3 main fields: - SEQUENCINGS - PROJECTS - JOBS\nSEQUENCINGS is used to define the sample of a sequencing run that share similar adapter for trimming the reads, genome reference, and input samples (for ChIP-seq, more than one input can be indicated but only the first one will be used when identifying peak).\nEach sequencing must have a parameters field to indicates at least: - the genome reference for bowtie2 (BOWTIE2_REF) - a bed of blacklisted regions (BLACKLIST_BED), see https://github.com/Boyle-Lab/Blacklist to download the file corresponding to the genome you use - a file indicating the chromosome size (CHROM_SIZE), see https://hgdownload.cse.ucsc.edu/goldenpath/hg38/bigZips/ to download the one for GRCh38/hg38. UCSC also host the files for other genomes such as mm10. - the genome used, either the .fa file of the reference used to build bowtie2 reference (toplevel.fa for ensembl) or a string such as hg38 or mm10 if the genome was configured in homer with configureHomer.pl (GENOME) - Adaptor trimming will be realized if the R1_ADAPTOR and the R2_ADAPTORfields are present\nSEQUENCING:\n  MO211:\n    SAMPLES:\n      PSMD6_F1_Ci:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        TYPE: H3K27AC\n        R2: &lt;PATH_TO_R2_fastq&gt;\n      PSMD6_F1_Fa:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        TYPE: ATAC\n        R2: &lt;PATH_TO_R2_fastq&gt;\n    INPUT:\n      Input_Batch1:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        R2: &lt;PATH_TO_R2_fastq&gt;\n    PATH: &lt;PATH_TO_R1_fastq&gt;\n    R1_ADAPTOR: CTGTCTCTTATACACATCT (modify to the sequence corresponding to your samples or remove this field to not trim)\n    R2_ADAPTOR: CTGTCTCTTATACACATCT (modify to the sequence corresponding to your samples or remove this field to not trim)\n    PARAMETERS:\n      CUTADAPT: -q 20 --pair-filter=any (cutadapt paramters by default, modify or leave empty)\n      BOWTIE2_REF: &lt;PATH&gt;/index-bowtie-2.3.0/Homo_sapiens.GRCh38.dna.toplevel (modify to point to your reference for bowtie2)\n      BLACKLIST_BED: &lt;PATH&gt;/hg38-blacklist.v2.bed \n      GENOME: &lt;PATH&gt;/ensembl/release-99/Homo_sapiens.GRCh38.dna.toplevel.fa\n      CHROM_SIZE: &lt;PATH&gt;/hg38.chrom.sizes\nPROJECTS is used to regroup samples of different sequencing when realising peak calling and the minimal number of samples in which a peak is identified to be keep in the final count matrix. To be regrouped, the samples need to shares the same mark. The path of each project indicate where the files resulting of the peak calling will be created. It is recommanded to use different folders for each projects.\nPROJECTS:\n  ATAC:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: ATAC\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO211\n  ChIP_H3K27ME3:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H3K27ME3\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\n  ChIP_H3K27AC:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H3K27AC\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\n  ChIP_H2AUB:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H2AUB\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\nThe JOBS field is used to indicate the number of cpu to use for multithreadings and the QOS when running jobs on a clusters with an executor like slurm.\nJOBS:\n  CORES_PER_JOBS:\n    FASTQC: 10\n    CUTADAPT: 10\n    BOWTIE2: 30\n  QOS_INFOS:\n    short:\n      MaxWall: 1440\n    medium:\n      MaxWall: 4320\n    long:\n      MaxWall: 11520\nYou can use the genomake cli API to run snakemake:\ngenomake chromake -c ./config.yaml --cores 250 --local-cores 1 --jobs 8\nAll options can be checked with a:\ngenomake chromake -h\nThe “–others-snakemake” option allow to specify additionnal arguments in the final command. It can be useful to unlock the working directory, try a dry run or specify an executor (slurm in my example).\ngenomake chromake -c ./config.yaml --cores 250 --local-cores 1 --jobs 8 --others-snakemake \"--executor slurm --default-resources slurm_account=singlecell clusters=nautilus --slurm-logdir ./logs --slurm-keep-successful-logs --slurm-delete-logfiles-older-than 0 --rerun-incomplete -np --unlock\" -p\nThis command will print the command next as the “-p” argument was used, without it, the command will be executed):\nsnakemake --snakefile &lt;PATH to snakefile in installation&gt; --configfile ./config.yaml --retries 4 --cores 250 --jobs 8 --local-cores 1 --executor slurm --default-resources slurm_account=singlecell clusters=nautilus --slurm-logdir ./logs --slurm-keep-successful-logs --slurm-delete-logfiles-older-than 0 --rerun-incomplete\nFor more information, check theCommand Line Interface and the Get startedget_started.qmd) pages of the documentation.",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.html#notes",
    "href": "reference/pipelines.chromake.html#notes",
    "title": "pipelines.chromake",
    "section": "",
    "text": "This subpackage contains submodules (genomake.pipelines.chromake.scripts.config and genomake.pipelines.chromake.scripts.config). Among them, paths is used by the snakefile to track the files it generate, while config was created to help the user create the YAML config file needed by snakemake.",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.html#examples",
    "href": "reference/pipelines.chromake.html#examples",
    "title": "pipelines.chromake",
    "section": "",
    "text": "To run the pipeline: - you need at least 60 Go of RAM. - you need a configuration file in a yaml format. Check genomake.pipelines.chromake.scripts.config.create_example_config for an example. The genomake.pipelines.chromake.scripts.config subpackage contains functions to generate such a config file from a samplesheet. - The configuration is composed of 3 main fields: - SEQUENCINGS - PROJECTS - JOBS\nSEQUENCINGS is used to define the sample of a sequencing run that share similar adapter for trimming the reads, genome reference, and input samples (for ChIP-seq, more than one input can be indicated but only the first one will be used when identifying peak).\nEach sequencing must have a parameters field to indicates at least: - the genome reference for bowtie2 (BOWTIE2_REF) - a bed of blacklisted regions (BLACKLIST_BED), see https://github.com/Boyle-Lab/Blacklist to download the file corresponding to the genome you use - a file indicating the chromosome size (CHROM_SIZE), see https://hgdownload.cse.ucsc.edu/goldenpath/hg38/bigZips/ to download the one for GRCh38/hg38. UCSC also host the files for other genomes such as mm10. - the genome used, either the .fa file of the reference used to build bowtie2 reference (toplevel.fa for ensembl) or a string such as hg38 or mm10 if the genome was configured in homer with configureHomer.pl (GENOME) - Adaptor trimming will be realized if the R1_ADAPTOR and the R2_ADAPTORfields are present\nSEQUENCING:\n  MO211:\n    SAMPLES:\n      PSMD6_F1_Ci:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        TYPE: H3K27AC\n        R2: &lt;PATH_TO_R2_fastq&gt;\n      PSMD6_F1_Fa:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        TYPE: ATAC\n        R2: &lt;PATH_TO_R2_fastq&gt;\n    INPUT:\n      Input_Batch1:\n        R1: &lt;PATH_TO_R1_fastq&gt;\n        R2: &lt;PATH_TO_R2_fastq&gt;\n    PATH: &lt;PATH_TO_R1_fastq&gt;\n    R1_ADAPTOR: CTGTCTCTTATACACATCT (modify to the sequence corresponding to your samples or remove this field to not trim)\n    R2_ADAPTOR: CTGTCTCTTATACACATCT (modify to the sequence corresponding to your samples or remove this field to not trim)\n    PARAMETERS:\n      CUTADAPT: -q 20 --pair-filter=any (cutadapt paramters by default, modify or leave empty)\n      BOWTIE2_REF: &lt;PATH&gt;/index-bowtie-2.3.0/Homo_sapiens.GRCh38.dna.toplevel (modify to point to your reference for bowtie2)\n      BLACKLIST_BED: &lt;PATH&gt;/hg38-blacklist.v2.bed \n      GENOME: &lt;PATH&gt;/ensembl/release-99/Homo_sapiens.GRCh38.dna.toplevel.fa\n      CHROM_SIZE: &lt;PATH&gt;/hg38.chrom.sizes\nPROJECTS is used to regroup samples of different sequencing when realising peak calling and the minimal number of samples in which a peak is identified to be keep in the final count matrix. To be regrouped, the samples need to shares the same mark. The path of each project indicate where the files resulting of the peak calling will be created. It is recommanded to use different folders for each projects.\nPROJECTS:\n  ATAC:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: ATAC\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO211\n  ChIP_H3K27ME3:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H3K27ME3\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\n  ChIP_H3K27AC:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H3K27AC\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\n  ChIP_H2AUB:\n    PROJECT_PATH: &lt;PATH&gt;\n    TYPE: H2AUB\n    MIN_SAMPLES_FOR_PEAKS: 2\n    SEQUENCING:\n    - MO203\nThe JOBS field is used to indicate the number of cpu to use for multithreadings and the QOS when running jobs on a clusters with an executor like slurm.\nJOBS:\n  CORES_PER_JOBS:\n    FASTQC: 10\n    CUTADAPT: 10\n    BOWTIE2: 30\n  QOS_INFOS:\n    short:\n      MaxWall: 1440\n    medium:\n      MaxWall: 4320\n    long:\n      MaxWall: 11520\nYou can use the genomake cli API to run snakemake:\ngenomake chromake -c ./config.yaml --cores 250 --local-cores 1 --jobs 8\nAll options can be checked with a:\ngenomake chromake -h\nThe “–others-snakemake” option allow to specify additionnal arguments in the final command. It can be useful to unlock the working directory, try a dry run or specify an executor (slurm in my example).\ngenomake chromake -c ./config.yaml --cores 250 --local-cores 1 --jobs 8 --others-snakemake \"--executor slurm --default-resources slurm_account=singlecell clusters=nautilus --slurm-logdir ./logs --slurm-keep-successful-logs --slurm-delete-logfiles-older-than 0 --rerun-incomplete -np --unlock\" -p\nThis command will print the command next as the “-p” argument was used, without it, the command will be executed):\nsnakemake --snakefile &lt;PATH to snakefile in installation&gt; --configfile ./config.yaml --retries 4 --cores 250 --jobs 8 --local-cores 1 --executor slurm --default-resources slurm_account=singlecell clusters=nautilus --slurm-logdir ./logs --slurm-keep-successful-logs --slurm-delete-logfiles-older-than 0 --rerun-incomplete\nFor more information, check theCommand Line Interface and the Get startedget_started.qmd) pages of the documentation.",
    "crumbs": [
      "Get started",
      "chromake",
      "`chromake`"
    ]
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html",
    "href": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html",
    "title": "pipelines.chromake.scripts.config.check_project_and_sequencing",
    "section": "",
    "text": "pipelines.chromake.scripts.config.check_project_and_sequencing(config)\nEnsures that projects with no associated sequencing samples are removed from the config, and removes empty sequencing projects, while making sure the mark is considered in the filtering process.\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig\ndict\nLoaded YAML config (as a dictionary).\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\ndict\nUpdated config dictionary."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html#parameters",
    "title": "pipelines.chromake.scripts.config.check_project_and_sequencing",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig\ndict\nLoaded YAML config (as a dictionary).\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html#returns",
    "href": "reference/pipelines.chromake.scripts.config.check_project_and_sequencing.html#returns",
    "title": "pipelines.chromake.scripts.config.check_project_and_sequencing",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\ndict\nUpdated config dictionary."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_config_from_table.html",
    "href": "reference/pipelines.chromake.scripts.config.create_config_from_table.html",
    "title": "pipelines.chromake.scripts.config.create_config_from_table",
    "section": "",
    "text": "pipelines.chromake.scripts.config.create_config_from_table(\n    table_path,\n    output_path,\n    proj_paths,\n    jobs=None,\n    sequencings=None,\n)\nCreate a YAML config from a table. Supports SAMPLES and optional INPUT files.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ntable_path\nstr\nPath to the input CSV or Excel table.\nrequired\n\n\noutput_path\nstr\nPath to write the YAML config.\nrequired\n\n\nproj_paths\ndict\nDictionary of project_name -&gt; project_path.\nrequired\n\n\njobs\ndict\nDefault JOBS settings (CORES_PER_JOBS, QOS_INFOS).\nNone\n\n\nsequencings\ndict\nDictionary of sequencings informations (PATH, R1_ADAPTOR, R2_ADAPTOR).\nNone\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML config file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_config_from_table.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.create_config_from_table.html#parameters",
    "title": "pipelines.chromake.scripts.config.create_config_from_table",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\ntable_path\nstr\nPath to the input CSV or Excel table.\nrequired\n\n\noutput_path\nstr\nPath to write the YAML config.\nrequired\n\n\nproj_paths\ndict\nDictionary of project_name -&gt; project_path.\nrequired\n\n\njobs\ndict\nDefault JOBS settings (CORES_PER_JOBS, QOS_INFOS).\nNone\n\n\nsequencings\ndict\nDictionary of sequencings informations (PATH, R1_ADAPTOR, R2_ADAPTOR).\nNone"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_config_from_table.html#returns",
    "href": "reference/pipelines.chromake.scripts.config.create_config_from_table.html#returns",
    "title": "pipelines.chromake.scripts.config.create_config_from_table",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nstr\nPath to the written YAML config file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html",
    "href": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html",
    "title": "pipelines.chromake.scripts.config.create_samplesheet_from_config",
    "section": "",
    "text": "pipelines.chromake.scripts.config.create_samplesheet_from_config(\n    config_path,\n    output_path,\n    strand_columns=False,\n    excel=True,\n)\nCreate a samplesheet table (CSV or Excel) from a YAML config, resolving relative paths by adding the sequencing project path. Includes both SAMPLES and INPUTS.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\noutput_path\nstr\nPath to save the generated table (CSV by default; Excel if excel=True).\nrequired\n\n\nstrand_columns\nbool\nIf True, each strand (R1, R2) PATH will be a separate column (wide format); if False, each strand will be in separate rows and a STRAND columns will be added to differentiate them (long format).\nFalse\n\n\nexcel\nbool\nIf True, save as Excel (.xlsx). Otherwise, save as CSV.\nTrue\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nstr\nPath to the generated samplesheet file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html#parameters",
    "title": "pipelines.chromake.scripts.config.create_samplesheet_from_config",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\noutput_path\nstr\nPath to save the generated table (CSV by default; Excel if excel=True).\nrequired\n\n\nstrand_columns\nbool\nIf True, each strand (R1, R2) PATH will be a separate column (wide format); if False, each strand will be in separate rows and a STRAND columns will be added to differentiate them (long format).\nFalse\n\n\nexcel\nbool\nIf True, save as Excel (.xlsx). Otherwise, save as CSV.\nTrue"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html#returns",
    "href": "reference/pipelines.chromake.scripts.config.create_samplesheet_from_config.html#returns",
    "title": "pipelines.chromake.scripts.config.create_samplesheet_from_config",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nstr\nPath to the generated samplesheet file."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.remove_samples.html",
    "href": "reference/pipelines.chromake.scripts.config.remove_samples.html",
    "title": "pipelines.chromake.scripts.config.remove_samples",
    "section": "",
    "text": "pipelines.chromake.scripts.config.remove_samples(\n    config_path,\n    sequencing_name,\n    samples,\n)\nRemove specific samples from a project in the YAML config.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the project containing the samples.\nrequired\n\n\nsamples\nlist of str\nList of sample names to remove.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.remove_samples.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.remove_samples.html#parameters",
    "title": "pipelines.chromake.scripts.config.remove_samples",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\nsequencing_name\nstr\nName of the project containing the samples.\nrequired\n\n\nsamples\nlist of str\nList of sample names to remove.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.update_jobs.html",
    "href": "reference/pipelines.chromake.scripts.config.update_jobs.html",
    "title": "pipelines.chromake.scripts.config.update_jobs",
    "section": "",
    "text": "pipelines.chromake.scripts.config.update_jobs(config_path, jobs)\nUpdate or add the JOBS section in an existing YAML config.\nCORES_PER_JOBS: number of cpu cores to use for each jobs (&gt;=1)\nQOS_INFOS: if using an executor like slurm, indicate the name of the qos (e.g. short), and the associated MaxWall in minutes.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\njobs\ndict\nDictionary containing JOBS information to update. Can be a full replacement or partial update.\nrequired\n\n\n\n\n\n\njobs_update = {\n    \"CORES_PER_JOBS\": {\n        \"FASTQC\": 10,\n        \"CUTADAPT\": 10,\n        \"BOWTIE2\": 30,\n        \"SAMTOOLS_QC\": 5,\n        \"MULTIBAMSUMMARY\": 5,\n        \"BEDTOOLS\": 5\n    },\n    \"QOS_INFOS\": {\n        \"short\": {\"MaxWall\": 2000},\n        \"medium\": {\"MaxWall\": 5000},\n        \"long\": {\"MaxWall\": 15000} \n    }\n}\nupdate_jobs(\"config.yaml\", jobs_update)"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.update_jobs.html#parameters",
    "href": "reference/pipelines.chromake.scripts.config.update_jobs.html#parameters",
    "title": "pipelines.chromake.scripts.config.update_jobs",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\nconfig_path\nstr\nPath to the YAML config file.\nrequired\n\n\njobs\ndict\nDictionary containing JOBS information to update. Can be a full replacement or partial update.\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.config.update_jobs.html#example",
    "href": "reference/pipelines.chromake.scripts.config.update_jobs.html#example",
    "title": "pipelines.chromake.scripts.config.update_jobs",
    "section": "",
    "text": "jobs_update = {\n    \"CORES_PER_JOBS\": {\n        \"FASTQC\": 10,\n        \"CUTADAPT\": 10,\n        \"BOWTIE2\": 30,\n        \"SAMTOOLS_QC\": 5,\n        \"MULTIBAMSUMMARY\": 5,\n        \"BEDTOOLS\": 5\n    },\n    \"QOS_INFOS\": {\n        \"short\": {\"MaxWall\": 2000},\n        \"medium\": {\"MaxWall\": 5000},\n        \"long\": {\"MaxWall\": 15000} \n    }\n}\nupdate_jobs(\"config.yaml\", jobs_update)"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html",
    "href": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html",
    "title": "pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths",
    "section": "",
    "text": "pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths(\n    cfg,\n    sequencing_name,\n    mode,\n)\nGet the path to the files generated by the pipeline for the samples of a specific sequencing.\n\n\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nsequencing_name\nstr\nString representing the name of the sequencing\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered (bam files after filtering the non-standard chromosomes) - flagstat (output of samtools flagstat on the bam files) - stats (output of samtools stats on the bam files) - multiqc_stats (multiqc on the folder containing the stats output)\nrequired\n\n\n\n\n\n\n\n\n\nName\nType\nDescription\n\n\n\n\n\nlist\nA list of all file paths."
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html#parameters",
    "href": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html#parameters",
    "title": "pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths",
    "section": "",
    "text": "Name\nType\nDescription\nDefault\n\n\n\n\ncfg\ndict\nDict representing the configuration of an analysis with the chromake pipeline.\nrequired\n\n\nsequencing_name\nstr\nString representing the name of the sequencing\nrequired\n\n\nmode\nstr\nString representing the files to get. Accepted values are: - sequencing (raw fastq) - multiqc_raw (multiqc report regrouping the fastqc of the raw fastq files) - cutadapt (fastq after adapter trimming) - fastqc_trimmed (fastqc reports after the adapter trimming) - multiqc_trimmed (multiqc report after adapter trimming) - bam (bam files after alignment with bowtie2) - bam_filtered (bam files after filtering the non-standard chromosomes) - flagstat (output of samtools flagstat on the bam files) - stats (output of samtools stats on the bam files) - multiqc_stats (multiqc on the folder containing the stats output)\nrequired"
  },
  {
    "objectID": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html#returns",
    "href": "reference/pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths.html#returns",
    "title": "pipelines.chromake.scripts.paths.get_sequencing_fastq_related_paths",
    "section": "",
    "text": "Name\nType\nDescription\n\n\n\n\n\nlist\nA list of all file paths."
  }
]